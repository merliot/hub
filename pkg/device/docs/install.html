<h2>INSTALL GUIDE</h2>

<p>There a multiple ways to install Merliot Hub.  The main decision is to run
the hub on the cloud or to run on local hardware.</p>

<img src="/docs/images/install-flowchart.svg">

<p>If you have your own server, you can install your hub locally.  This is the
more private choice.  The server doesn't have to be a huge system; a raspberry
Pi is sufficient, as well as a laptop.  If you want to access the hub remotely,
over the Internet, use <a target="_blank" href="https://tailscale.com">Tailscale</a>.</p>

<p>If you don't have a server, you can "rent" one in the cloud to host your
hub.  This is a less private choice because a third party is now hosting your
hub, and you'll have to create an account.</p>

<h3>DOCKER</h3>

<p>Run the latest version of Merliot hub using <a target="_blank" href="https://www.docker.com/">Docker</a>.</p>

<pre class="cmd-line">
$ sudo docker run -p 8000:8000 merliot/hub
</pre>

<p>Browse to http://localhost:8000 to see hub.<p>

<p>The hub listens on port :8000, by default.  You can override this with the
PORT environment variable.</p>

<p>The hub reads devices from devices.json file, if present.  Any changes made
to the devices are stored back to devices.json.  When running in docker, we
need to store the devices.json file outside the container so saved changes
persist.  Use the -v option to map a local directory to a directory inside the
container.  Use /app for container directory.  For example, map current
directory to /app:</p>

<pre class="cmd-line">
$ sudo docker run -p 8000:8000 -v ./:/app merliot/hub
</pre>

<h3>TAILSCALE</h3>

<p>Use <a target="_blank" href="https://tailscale.com">Tailscale</a> to create
a private network, the tailnet, for the hub.  The hub runs on a local server
using the docker image and is connected to the tailnet.  Other devices on the
tailnet can now access the hub from anywhere on the Internet.  See the
Tailscale <a target="_blank" href="https://tailscale.com/download">guides</a> on installing Tailscale.</p>

<img src="/docs/images/tailscale.svg">

<h3>CLOUD</h3>

<p>Run Merliot Hub on the cloud using the merliot/hub docker image.  The
minimum VM requirements are: 512MB RAM and 2GB disk.</p>

<p>Here are several cloud provider options, ranging from FREE to $$:</p>

<h4>Koyeb (FREE)</h4>

<p>You can run Merliot Hub on <a target="_blank" href="koyeb.com">Koyeb</a> for
FREE using Koyeb's Free Forever offer.  You have to create an account on Koyeb.
Click the one-click button below to create a hub instance on Koyeb.</p>

<a href="https://app.koyeb.com/deploy?name=hub&type=docker&image=merliot%2Fhub&instance_type=free&regions=was&ports=8000;http;/">
	<img class="m-8" src="https://www.koyeb.com/static/images/deploy/button.svg">
</a>

<p>Follow the prompts to install the hub.  You can add enviroment <a
	href="/doc/env-vars">variables</a> to configure the hub.  The hub
address will be something like:</p>

<pre class="cmd-line">https://asquare-eloise-merliot-67e2796c.koyeb.app/</pre>

<p>If you have a domain name registered, you can assign it to the hub.</p>

<h4>Digital Ocean ($5/month)</h4>

<p>Run Merliot Hub on <a href="https://www.digitalocean.com/">Digital Ocean</a>.  It cost $5/month to run the hub.</p>

<ol>
  <li>Click the "Deploy to web app" button on the project page.</li>
  <li>Under Service Provider, select "Docker Hub".</li>
  <li>Repository is "merliot/hub". No tag. No credentials.</li>
  <li>Edit the Service Resources:
    <ul>
      <li>Resource Size and select the $5 VM with 512MB RAM.</li>
      <li>Edit the Port to 8000.</li>
    </ul>
  </li>
  <li>Create the Resource.</li>
</ol>

<p>It takes a few minutes to start the hub.  The hub address will be something like:</p>

<pre class="cmd-line">https://monkfish-app-4kzqh.ondigitalocean.app/</pre>

<p>If you have a domain name registered, you can assign it to the hub.</p>

<h4>Google Cloud Platform (~$20/month)</h4>

TODO finish GCP doc
